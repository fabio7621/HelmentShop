import{_ as H,m as R,a as X,c as F,e as M,b as o,w as E,r as P,t as I,j as Y,v as J,k as K,g as N,F as D,l as Q,p as W,n as Z,o as k,h as B,f as j}from"./index-B2CUwak0.js";import{m as T,c as $,g as ee,i as te,f as se,n as O,h as q,S as ie,d as ne}from"./create-element-if-not-defined-ChUUayHa.js";import{c as G}from"./cartStore-CWo_eutF.js";import{L as oe}from"./Loadingitem-BtKMH2zq.js";import{_ as ae,a as re}from"./banner-p04-C3FjaFZe.js";import{_ as le}from"./home-BL8hcX6S.js";function ce(h){let{swiper:e,extendParams:S,on:v,emit:d}=h;S({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function _(s){let r;return s&&typeof s=="string"&&e.isElement&&(r=e.el.querySelector(s),r)?r:(s&&(typeof s=="string"&&(r=[...document.querySelectorAll(s)]),e.params.uniqueNavElements&&typeof s=="string"&&r.length>1&&e.el.querySelectorAll(s).length===1&&(r=e.el.querySelector(s))),s&&!r?s:r)}function b(s,r){const a=e.params.navigation;s=T(s),s.forEach(i=>{i&&(i.classList[r?"add":"remove"](...a.disabledClass.split(" ")),i.tagName==="BUTTON"&&(i.disabled=r),e.params.watchOverflow&&e.enabled&&i.classList[e.isLocked?"add":"remove"](a.lockClass))})}function g(){const{nextEl:s,prevEl:r}=e.navigation;if(e.params.loop){b(r,!1),b(s,!1);return}b(r,e.isBeginning&&!e.params.rewind),b(s,e.isEnd&&!e.params.rewind)}function m(s){s.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),d("navigationPrev"))}function n(s){s.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),d("navigationNext"))}function t(){const s=e.params.navigation;if(e.params.navigation=$(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(s.nextEl||s.prevEl))return;let r=_(s.nextEl),a=_(s.prevEl);Object.assign(e.navigation,{nextEl:r,prevEl:a}),r=T(r),a=T(a);const i=(f,l)=>{f&&f.addEventListener("click",l==="next"?n:m),!e.enabled&&f&&f.classList.add(...s.lockClass.split(" "))};r.forEach(f=>i(f,"next")),a.forEach(f=>i(f,"prev"))}function c(){let{nextEl:s,prevEl:r}=e.navigation;s=T(s),r=T(r);const a=(i,f)=>{i.removeEventListener("click",f==="next"?n:m),i.classList.remove(...e.params.navigation.disabledClass.split(" "))};s.forEach(i=>a(i,"next")),r.forEach(i=>a(i,"prev"))}v("init",()=>{e.params.navigation.enabled===!1?p():(t(),g())}),v("toEdge fromEdge lock unlock",()=>{g()}),v("destroy",()=>{c()}),v("enable disable",()=>{let{nextEl:s,prevEl:r}=e.navigation;if(s=T(s),r=T(r),e.enabled){g();return}[...s,...r].filter(a=>!!a).forEach(a=>a.classList.add(e.params.navigation.lockClass))}),v("click",(s,r)=>{let{nextEl:a,prevEl:i}=e.navigation;a=T(a),i=T(i);const f=r.target;if(e.params.navigation.hideOnClick&&!i.includes(f)&&!a.includes(f)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===f||e.pagination.el.contains(f)))return;let l;a.length?l=a[0].classList.contains(e.params.navigation.hiddenClass):i.length&&(l=i[0].classList.contains(e.params.navigation.hiddenClass)),d(l===!0?"navigationShow":"navigationHide"),[...a,...i].filter(y=>!!y).forEach(y=>y.classList.toggle(e.params.navigation.hiddenClass))}});const u=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),t(),g()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),c()};Object.assign(e.navigation,{enable:u,disable:p,update:g,init:t,destroy:c})}function de(h){let{swiper:e,extendParams:S,on:v}=h;S({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let d=!1,_=!1;e.thumbs={swiper:null};function b(){const n=e.thumbs.swiper;if(!n||n.destroyed)return;const t=n.clickedIndex,c=n.clickedSlide;if(c&&c.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof t>"u"||t===null)return;let u;n.params.loop?u=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10):u=t,e.params.loop?e.slideToLoop(u):e.slideTo(u)}function g(){const{thumbs:n}=e.params;if(d)return!1;d=!0;const t=e.constructor;if(n.swiper instanceof t)e.thumbs.swiper=n.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(te(n.swiper)){const c=Object.assign({},n.swiper);Object.assign(c,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new t(c),_=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",b),!0}function m(n){const t=e.thumbs.swiper;if(!t||t.destroyed)return;const c=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():t.params.slidesPerView;let u=1;const p=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(u=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(u=1),u=Math.floor(u),t.slides.forEach(a=>a.classList.remove(p)),t.params.loop||t.params.virtual&&t.params.virtual.enabled)for(let a=0;a<u;a+=1)se(t.slidesEl,`[data-swiper-slide-index="${e.realIndex+a}"]`).forEach(i=>{i.classList.add(p)});else for(let a=0;a<u;a+=1)t.slides[e.realIndex+a]&&t.slides[e.realIndex+a].classList.add(p);const s=e.params.thumbs.autoScrollOffset,r=s&&!t.params.loop;if(e.realIndex!==t.realIndex||r){const a=t.activeIndex;let i,f;if(t.params.loop){const l=t.slides.filter(y=>y.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];i=t.slides.indexOf(l),f=e.activeIndex>e.previousIndex?"next":"prev"}else i=e.realIndex,f=i>e.previousIndex?"next":"prev";r&&(i+=f==="next"?s:-1*s),t.visibleSlidesIndexes&&t.visibleSlidesIndexes.indexOf(i)<0&&(t.params.centeredSlides?i>a?i=i-Math.floor(c/2)+1:i=i+Math.floor(c/2)-1:i>a&&t.params.slidesPerGroup,t.slideTo(i,n?0:void 0))}}v("beforeInit",()=>{const{thumbs:n}=e.params;if(!(!n||!n.swiper))if(typeof n.swiper=="string"||n.swiper instanceof HTMLElement){const t=ee(),c=()=>{const p=typeof n.swiper=="string"?t.querySelector(n.swiper):n.swiper;if(p&&p.swiper)n.swiper=p.swiper,g(),m(!0);else if(p){const s=r=>{n.swiper=r.detail[0],p.removeEventListener("init",s),g(),m(!0),n.swiper.update(),e.update()};p.addEventListener("init",s)}return p},u=()=>{if(e.destroyed)return;c()||requestAnimationFrame(u)};requestAnimationFrame(u)}else g(),m(!0)}),v("slideChange update resize observerUpdate",()=>{m()}),v("setTransition",(n,t)=>{const c=e.thumbs.swiper;!c||c.destroyed||c.setTransition(t)}),v("beforeDestroy",()=>{const n=e.thumbs.swiper;!n||n.destroyed||_&&n.destroy()}),Object.assign(e.thumbs,{init:g,update:m})}function ue(h){let{swiper:e,extendParams:S,emit:v,once:d}=h;S({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function _(){if(e.params.cssMode)return;const m=e.getTranslate();e.setTranslate(m),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function b(){if(e.params.cssMode)return;const{touchEventsData:m,touches:n}=e;m.velocities.length===0&&m.velocities.push({position:n[e.isHorizontal()?"startX":"startY"],time:m.touchStartTime}),m.velocities.push({position:n[e.isHorizontal()?"currentX":"currentY"],time:O()})}function g(m){let{currentPos:n}=m;if(e.params.cssMode)return;const{params:t,wrapperEl:c,rtlTranslate:u,snapGrid:p,touchEventsData:s}=e,a=O()-s.touchStartTime;if(n<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(n>-e.maxTranslate()){e.slides.length<p.length?e.slideTo(p.length-1):e.slideTo(e.slides.length-1);return}if(t.freeMode.momentum){if(s.velocities.length>1){const w=s.velocities.pop(),x=s.velocities.pop(),U=w.position-x.position,z=w.time-x.time;e.velocity=U/z,e.velocity/=2,Math.abs(e.velocity)<t.freeMode.minimumVelocity&&(e.velocity=0),(z>150||O()-w.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=t.freeMode.momentumVelocityRatio,s.velocities.length=0;let i=1e3*t.freeMode.momentumRatio;const f=e.velocity*i;let l=e.translate+f;u&&(l=-l);let y=!1,L;const V=Math.abs(e.velocity)*20*t.freeMode.momentumBounceRatio;let A;if(l<e.maxTranslate())t.freeMode.momentumBounce?(l+e.maxTranslate()<-V&&(l=e.maxTranslate()-V),L=e.maxTranslate(),y=!0,s.allowMomentumBounce=!0):l=e.maxTranslate(),t.loop&&t.centeredSlides&&(A=!0);else if(l>e.minTranslate())t.freeMode.momentumBounce?(l-e.minTranslate()>V&&(l=e.minTranslate()+V),L=e.minTranslate(),y=!0,s.allowMomentumBounce=!0):l=e.minTranslate(),t.loop&&t.centeredSlides&&(A=!0);else if(t.freeMode.sticky){let w;for(let x=0;x<p.length;x+=1)if(p[x]>-l){w=x;break}Math.abs(p[w]-l)<Math.abs(p[w-1]-l)||e.swipeDirection==="next"?l=p[w]:l=p[w-1],l=-l}if(A&&d("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(u?i=Math.abs((-l-e.translate)/e.velocity):i=Math.abs((l-e.translate)/e.velocity),t.freeMode.sticky){const w=Math.abs((u?-l:l)-e.translate),x=e.slidesSizesGrid[e.activeIndex];w<x?i=t.speed:w<2*x?i=t.speed*1.5:i=t.speed*2.5}}else if(t.freeMode.sticky){e.slideToClosest();return}t.freeMode.momentumBounce&&y?(e.updateProgress(L),e.setTransition(i),e.setTranslate(l),e.transitionStart(!0,e.swipeDirection),e.animating=!0,q(c,()=>{!e||e.destroyed||!s.allowMomentumBounce||(v("momentumBounce"),e.setTransition(t.speed),setTimeout(()=>{e.setTranslate(L),q(c,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(v("_freeModeNoMomentumRelease"),e.updateProgress(l),e.setTransition(i),e.setTranslate(l),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,q(c,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(l),e.updateActiveIndex(),e.updateSlidesClasses()}else if(t.freeMode.sticky){e.slideToClosest();return}else t.freeMode&&v("_freeModeNoMomentumRelease");(!t.freeMode.momentum||a>=t.longSwipesMs)&&(v("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:_,onTouchMove:b,onTouchEnd:g}})}const pe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2025.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='圖層_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2040%2040'%20style='enable-background:new%200%200%2040%2040;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%23313740;}%20.st1{fill:%23FFFFFF;}%20%3c/style%3e%3crect%20id='Rectangle_1405'%20class='st0'%20width='40'%20height='40'/%3e%3cpath%20id='Icon_material-play-arrow'%20class='st1'%20d='M24.59,13.77v12.45L14.81,20L24.59,13.77z'/%3e%3c/svg%3e",me="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2025.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='圖層_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2040%2040'%20style='enable-background:new%200%200%2040%2040;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%23313740;}%20.st1{fill:%23FFFFFF;}%20%3c/style%3e%3crect%20id='Rectangle_1405'%20x='0'%20class='st0'%20width='40'%20height='40'/%3e%3cpath%20id='Icon_material-play-arrow'%20class='st1'%20d='M25.19,20l-9.78,6.22V13.77L25.19,20z'/%3e%3c/svg%3e",fe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2025.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='圖層_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2017.97%2020.54'%20style='enable-background:new%200%200%2017.97%2020.54;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%23FFFFFF;}%20%3c/style%3e%3cpath%20id='Icon_awesome-hand-pointer'%20class='st0'%20d='M17.97,9.63v3.85c0,0.12-0.01,0.25-0.04,0.37l-1.28,5.46%20c-0.17,0.73-0.82,1.24-1.56,1.24H6.74c-0.51,0-1-0.24-1.3-0.66l-5.13-7.06c-0.52-0.72-0.36-1.72,0.36-2.24s1.72-0.36,2.24,0.36l0,0%20l1.27,1.74V1.6c0-0.89,0.72-1.6,1.6-1.6s1.6,0.72,1.6,1.6v8.03H7.7v-1.6c0-0.89,0.72-1.6,1.6-1.6c0.89,0,1.6,0.72,1.6,1.6v1.6h0.32%20V8.67c0-0.89,0.72-1.6,1.6-1.6c0.89,0,1.6,0.72,1.6,1.6v0.96h0.32c0-0.89,0.72-1.6,1.6-1.6C17.25,8.03,17.97,8.74,17.97,9.63%20L17.97,9.63z%20M7.7,12.84H7.38v3.85H7.7V12.84z%20M11.23,12.84h-0.32v3.85h0.32L11.23,12.84z%20M14.76,12.84h-0.32v3.85h0.32V12.84z'/%3e%3c/svg%3e",ve={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_APIPATH:"fabio20"},{VITE_API:he,VITE_APIPATH:ge}=ve,we={data(){return{product:{},id:"",qty:1}},methods:{restInput(){this.product.qty<=0&&(this.product.qty=1)},getProduct(){const h=`${he}api/${ge}/product/${this.id}`;this.$http.get(h).then(e=>{this.product=e.data.product})},...X(G,["addToCart"])},computed:{...R(G,["isLoading"])},components:{Swiper:ne,SwiperSlide:ie,Loadingitem:oe},setup(){const h=Q(null);return{thumbsSwiper:h,setThumbsSwiper:S=>{h.value=S},modules:[ue,ce,de]}},created(){this.id=this.$route.params.productId,this.getProduct()}},C=h=>(W("data-v-5ace60a0"),h=h(),Z(),h),be=C(()=>o("section",{class:"section-main-banner"},[o("img",{class:"d-none d-md-block w-100",src:ae,alt:"banner"}),o("img",{class:"d-block d-md-none w-100",src:re,alt:"banner"})],-1)),xe={class:"section-bread"},_e={class:"section-bread-main"},ye={class:"bread-list d-flex align-items-center"},Te=C(()=>o("li",{class:"bread-list-item"},[o("div",{class:"section-bread-pic"},[o("img",{width:"20",src:le,alt:"home"})])],-1)),Se={class:"bread-list-item","aria-current":"page"},Ee={class:"section-product"},ke={class:"section-product-main"},Ie={class:"article-box row"},Me={class:"col-12 col-md-6"},Pe=["src"],Ce=["src"],Le=C(()=>o("div",{class:"swiper-button-prev"},[o("img",{class:"w-100",src:pe,alt:"prev"})],-1)),Ve=C(()=>o("div",{class:"swiper-button-next"},[o("img",{class:"w-100",src:me,alt:"next"})],-1)),Be=["src"],Ae=["src"],Fe={class:"col-12 col-md-6 d-flex flex-column"},De={class:"pro-inner-txt"},Oe={class:"pro-inner-price d-flex"},qe={class:"pro-inner-content"},ze={class:"input-group flex-nowrap"},Ne={class:"input-group-text",id:"addon-wrapping"},je={class:"pro-inner-btn"},Ge=C(()=>o("div",{class:"pro-inner-btn-pic"},[o("img",{src:fe,alt:"button_finger"})],-1));function Ue(h,e,S,v,d,_){const b=P("Loadingitem"),g=P("VueLoading"),m=P("swiper-slide"),n=P("swiper"),t=P("router-link");return k(),F(D,null,[M(g,{active:h.isLoading,"z-index":1060},{default:E(()=>[M(b)]),_:1},8,["active"]),be,o("section",xe,[o("div",_e,[o("ol",ye,[Te,o("li",Se,[o("a",null,I(d.product.title),1)])])])]),o("section",Ee,[o("div",ke,[o("div",Ie,[o("div",Me,[M(n,{style:{"--swiper-navigation-color":"#fff","--swiper-pagination-color":"#fff"},loop:!0,spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:v.thumbsSwiper},modules:v.modules,class:"mySwiper2"},{default:E(()=>[!d.product.imagesUrl||d.product.imagesUrl.length===0?(k(),B(m,{key:0},{default:E(()=>[o("img",{src:d.product.imageUrl,alt:"Product Image"},null,8,Pe)]),_:1})):(k(!0),F(D,{key:1},j(d.product.imagesUrl,(c,u)=>(k(),B(m,{key:u},{default:E(()=>[o("img",{src:c,alt:"Product Image"},null,8,Ce)]),_:2},1024))),128)),Le,Ve]),_:1},8,["navigation","thumbs","modules"]),M(n,{onSwiper:v.setThumbsSwiper,loop:!0,spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,modules:v.modules,class:"mySwiper"},{default:E(()=>[!d.product.imagesUrl||d.product.imagesUrl.length===0?(k(),B(m,{key:0},{default:E(()=>[o("img",{src:d.product.imageUrl,alt:"Product Image"},null,8,Be)]),_:1})):(k(!0),F(D,{key:1},j(d.product.imagesUrl,(c,u)=>(k(),B(m,{key:u},{default:E(()=>[o("img",{src:c,alt:"Product Image"},null,8,Ae)]),_:2},1024))),128))]),_:1},8,["onSwiper","modules"])]),o("div",Fe,[o("div",De,[o("h3",null,I(d.product.title),1),o("div",Oe,[o("span",null,[o("del",null,I(d.product.origin_price)+"元",1)]),o("p",null,I(d.product.price)+"元",1)]),o("div",qe,[o("p",null,I(d.product.description),1)])]),o("div",ze,[Y(o("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=c=>d.product.qty=c),class:"form-control","aria-label":"Userqty","aria-describedby":"addon-wrapping",min:"1",max:"10",onInput:e[1]||(e[1]=c=>_.restInput())},null,544),[[J,d.product.qty,void 0,{number:!0}]]),o("span",Ne,I(d.product.unit),1)]),o("div",je,[o("button",{onClick:e[2]||(e[2]=K(c=>h.addToCart(d.product.id,d.product.qty),["prevent"])),class:"d-flex justify-content-center align-items-center"},[N(" 加入購物車 "),Ge])])])]),M(t,{to:"/products",class:"backBtn"},{default:E(()=>[N("回到上一頁")]),_:1})])])],64)}const Qe=H(we,[["render",Ue],["__scopeId","data-v-5ace60a0"]]);export{Qe as default};
