import{_ as f,a as g,c as n,e as c,d as v,b as t,w as y,r as _,k as I,i as x,F as u,f as L,t as s,p as w,n as V,o as r}from"./index-Dr1hX6is.js";import{u as k}from"./toastMessage-CsUj_ydo.js";import{_ as O,a as A}from"./banner-p05-f1rL14bm.js";import{_ as S}from"./home-BL8hcX6S.js";import{_ as T}from"./motohead-BtBMMVQo.js";const E={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_APIPATH:"fabio20"},{VITE_API:h,VITE_APIPATH:p}=E,P={data(){return{order:{user:{}},orderId:""}},methods:{...g(k,["pushMessage"]),getOrder(){const o=`${h}api/${p}/order/${this.orderId}`;this.isLoading=!0,this.$http.get(o).then(a=>{this.order=a.data.order,this.isLoading=!1}).catch(a=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"取得訂單失敗",content:a.response.data.message})})},payOrder(){const o=`${h}api/${p}/pay/${this.orderId}`;this.isLoading=!0,this.$http.post(o).then(()=>{this.isLoading=!1,this.getOrder()}).catch(a=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"付款失敗",content:a.response.data.message})})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},e=o=>(w("data-v-35f56b2b"),o=o(),V(),o),M=v('<section class="section-main-banner" data-v-35f56b2b><img class="d-none d-md-block w-100" src="'+O+'" alt="banner" data-v-35f56b2b><img class="d-block d-md-none w-100" src="'+A+'" alt="banner" data-v-35f56b2b></section><section class="section-bread" data-v-35f56b2b><div class="section-bread-main" data-v-35f56b2b><ol class="bread-list d-flex align-items-center" data-v-35f56b2b><li class="bread-list-item" data-v-35f56b2b><div class="section-bread-pic" data-v-35f56b2b><img width="20" src="'+S+'" alt="homepic" data-v-35f56b2b></div></li><li class="bread-list-item" aria-current="page" data-v-35f56b2b><a data-v-35f56b2b>訂單</a></li></ol></div></section>',2),N={class:"section-product"},B={class:"section-product-main"},C=e(()=>t("div",{class:"section-product-title d-flex align-items-center"},[t("div",{class:"product-title-pic"},[t("img",{src:T,alt:""})]),t("h2",null,"您的訂單")],-1)),$={class:"my-5 row justify-content-center"},F={class:"table align-middle"},H=e(()=>t("thead",null,[t("th",null,"品名"),t("th",null,"數量"),t("th",null,"單價")],-1)),j={class:"text-end"},q=e(()=>t("td",null,null,-1)),z=e(()=>t("td",{colspan:"2",class:"text-end"},"總計",-1)),D={class:"text-end"},G={class:"table"},J=e(()=>t("th",{width:"100"},"Email",-1)),K=e(()=>t("th",null,"姓名",-1)),Q=e(()=>t("th",null,"收件人電話",-1)),R=e(()=>t("th",null,"收件人地址",-1)),U=e(()=>t("th",null,"付款狀態",-1)),W={key:0},X={key:1,class:"text-success"},Y={key:0,class:"text-end"},Z=e(()=>t("button",{type:"submit",class:"btn btn-danger"},"確認付款去",-1)),tt=[Z];function st(o,a,et,ot,d,l){const b=_("Loadingitem"),m=_("VueLoading");return r(),n(u,null,[c(m,{active:o.isLoading,"z-index":1060},{default:y(()=>[c(b)]),_:1},8,["active"]),M,t("section",N,[t("div",B,[C,t("div",$,[t("form",{class:"col-md-6 userOrder border bg-white",onSubmit:a[0]||(a[0]=I((...i)=>l.payOrder&&l.payOrder(...i),["prevent"]))},[t("table",F,[H,t("tbody",null,[(r(!0),n(u,null,L(d.order.products,i=>(r(),n("tr",{key:i.id},[t("td",null,s(i.product.title),1),t("td",null,s(i.qty)+"/"+s(i.product.unit),1),t("td",null,s(i.product.price),1),t("td",j,s(i.final_total),1)]))),128))]),t("tfoot",null,[t("tr",null,[q,z,t("td",D,s(d.order.total),1)])])]),t("table",G,[t("tbody",null,[t("tr",null,[J,t("td",null,s(d.order.user.email),1)]),t("tr",null,[K,t("td",null,s(d.order.user.name),1)]),t("tr",null,[Q,t("td",null,s(d.order.user.tel),1)]),t("tr",null,[R,t("td",null,s(d.order.user.address),1)]),t("tr",null,[U,t("td",null,[d.order.is_paid?(r(),n("span",X,"付款完成")):(r(),n("span",W,"尚未付款"))])])])]),d.order.is_paid===!1?(r(),n("div",Y,tt)):x("",!0)],32)])])])],64)}const lt=f(P,[["render",st],["__scopeId","data-v-35f56b2b"]]);export{lt as default};
